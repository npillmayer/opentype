// SPDX-License-Identifier: Unlicense OR BSD-3-Clause

package otarabic

// Code derived from generated Arabic table data for fallback shaping.

const firstArabicShape = 0x0621
const lastArabicShape = 0x06d3

// arabicShaping defines the shaping for arabic runes. Each entry is indexed by
// the shape, between 0 and 3:
//   - 0: initial
//   - 1: medial
//   - 2: final
//   - 3: isolated
//
// See also the bounds given by [firstArabicShape] and [lastArabicShape].
var arabicShaping = [...][4]uint16{ // required memory: 2 KB
	{0x0000, 0x0000, 0x0000, 0xfe80},
	{0x0000, 0x0000, 0xfe82, 0xfe81},
	{0x0000, 0x0000, 0xfe84, 0xfe83},
	{0x0000, 0x0000, 0xfe86, 0xfe85},
	{0x0000, 0x0000, 0xfe88, 0xfe87},
	{0xfe8b, 0xfe8c, 0xfe8a, 0xfe89},
	{0x0000, 0x0000, 0xfe8e, 0xfe8d},
	{0xfe91, 0xfe92, 0xfe90, 0xfe8f},
	{0x0000, 0x0000, 0xfe94, 0xfe93},
	{0xfe97, 0xfe98, 0xfe96, 0xfe95},
	{0xfe9b, 0xfe9c, 0xfe9a, 0xfe99},
	{0xfe9f, 0xfea0, 0xfe9e, 0xfe9d},
	{0xfea3, 0xfea4, 0xfea2, 0xfea1},
	{0xfea7, 0xfea8, 0xfea6, 0xfea5},
	{0x0000, 0x0000, 0xfeaa, 0xfea9},
	{0x0000, 0x0000, 0xfeac, 0xfeab},
	{0x0000, 0x0000, 0xfeae, 0xfead},
	{0x0000, 0x0000, 0xfeb0, 0xfeaf},
	{0xfeb3, 0xfeb4, 0xfeb2, 0xfeb1},
	{0xfeb7, 0xfeb8, 0xfeb6, 0xfeb5},
	{0xfebb, 0xfebc, 0xfeba, 0xfeb9},
	{0xfebf, 0xfec0, 0xfebe, 0xfebd},
	{0xfec3, 0xfec4, 0xfec2, 0xfec1},
	{0xfec7, 0xfec8, 0xfec6, 0xfec5},
	{0xfecb, 0xfecc, 0xfeca, 0xfec9},
	{0xfecf, 0xfed0, 0xfece, 0xfecd},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0xfed3, 0xfed4, 0xfed2, 0xfed1},
	{0xfed7, 0xfed8, 0xfed6, 0xfed5},
	{0xfedb, 0xfedc, 0xfeda, 0xfed9},
	{0xfedf, 0xfee0, 0xfede, 0xfedd},
	{0xfee3, 0xfee4, 0xfee2, 0xfee1},
	{0xfee7, 0xfee8, 0xfee6, 0xfee5},
	{0xfeeb, 0xfeec, 0xfeea, 0xfee9},
	{0x0000, 0x0000, 0xfeee, 0xfeed},
	{0xfbe8, 0xfbe9, 0xfef0, 0xfeef},
	{0xfef3, 0xfef4, 0xfef2, 0xfef1},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0xfb51, 0xfb50},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0xfbdd},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0xfb68, 0xfb69, 0xfb67, 0xfb66},
	{0xfb60, 0xfb61, 0xfb5f, 0xfb5e},
	{0xfb54, 0xfb55, 0xfb53, 0xfb52},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0xfb58, 0xfb59, 0xfb57, 0xfb56},
	{0xfb64, 0xfb65, 0xfb63, 0xfb62},
	{0xfb5c, 0xfb5d, 0xfb5b, 0xfb5a},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0xfb78, 0xfb79, 0xfb77, 0xfb76},
	{0xfb74, 0xfb75, 0xfb73, 0xfb72},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0xfb7c, 0xfb7d, 0xfb7b, 0xfb7a},
	{0xfb80, 0xfb81, 0xfb7f, 0xfb7e},
	{0x0000, 0x0000, 0xfb89, 0xfb88},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0xfb85, 0xfb84},
	{0x0000, 0x0000, 0xfb83, 0xfb82},
	{0x0000, 0x0000, 0xfb87, 0xfb86},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0xfb8d, 0xfb8c},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0xfb8b, 0xfb8a},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0xfb6c, 0xfb6d, 0xfb6b, 0xfb6a},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0xfb70, 0xfb71, 0xfb6f, 0xfb6e},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0xfb90, 0xfb91, 0xfb8f, 0xfb8e},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0xfbd5, 0xfbd6, 0xfbd4, 0xfbd3},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0xfb94, 0xfb95, 0xfb93, 0xfb92},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0xfb9c, 0xfb9d, 0xfb9b, 0xfb9a},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0xfb98, 0xfb99, 0xfb97, 0xfb96},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0xfb9f, 0xfb9e},
	{0xfba2, 0xfba3, 0xfba1, 0xfba0},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0xfbac, 0xfbad, 0xfbab, 0xfbaa},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0xfba5, 0xfba4},
	{0xfba8, 0xfba9, 0xfba7, 0xfba6},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0xfbe1, 0xfbe0},
	{0x0000, 0x0000, 0xfbda, 0xfbd9},
	{0x0000, 0x0000, 0xfbd8, 0xfbd7},
	{0x0000, 0x0000, 0xfbdc, 0xfbdb},
	{0x0000, 0x0000, 0xfbe3, 0xfbe2},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0xfbdf, 0xfbde},
	{0xfbfe, 0xfbff, 0xfbfd, 0xfbfc},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0xfbe6, 0xfbe7, 0xfbe5, 0xfbe4},
	{0x0000, 0x0000, 0x0000, 0x0000},
	{0x0000, 0x0000, 0xfbaf, 0xfbae},
	{0x0000, 0x0000, 0xfbb1, 0xfbb0},
}

type arabicLig struct {
	components []rune // currently with length 1 or 2
	ligature   rune
}

type arabicTableEntry struct {
	First     rune
	Ligatures []arabicLig
}

// arabicLigatureTable exposes lam-alef ligatures
var arabicLigatureTable = [...]arabicTableEntry{
	{0xfe91, []arabicLig{
		{[]rune{0xfea0}, 0xfc9c},
		{[]rune{0xfea4}, 0xfc9d},
		{[]rune{0xfea8}, 0xfc9e},
		{[]rune{0xfee2}, 0xfc08},
		{[]rune{0xfee4}, 0xfc9f},
	}},
	{0xfe92, []arabicLig{
		{[]rune{0xfeae}, 0xfc6a},
		{[]rune{0xfee6}, 0xfc6d},
		{[]rune{0xfef2}, 0xfc6f},
	}},
	{0xfe97, []arabicLig{
		{[]rune{0xfea0}, 0xfca1},
		{[]rune{0xfea4}, 0xfca2},
		{[]rune{0xfea8}, 0xfca3},
		{[]rune{0xfee2}, 0xfc0e},
		{[]rune{0xfee4}, 0xfca4},
	}},
	{0xfe98, []arabicLig{
		{[]rune{0xfeae}, 0xfc70},
		{[]rune{0xfee6}, 0xfc73},
		{[]rune{0xfef2}, 0xfc75},
	}},
	{0xfe9b, []arabicLig{
		{[]rune{0xfee2}, 0xfc12},
	}},
	{0xfe9f, []arabicLig{
		{[]rune{0xfee4}, 0xfca8},
	}},
	{0xfea3, []arabicLig{
		{[]rune{0xfee4}, 0xfcaa},
	}},
	{0xfea7, []arabicLig{
		{[]rune{0xfee4}, 0xfcac},
	}},
	{0xfeb3, []arabicLig{
		{[]rune{0xfee4}, 0xfcb0},
	}},
	{0xfeb7, []arabicLig{
		{[]rune{0xfee4}, 0xfd30},
	}},
	{0xfed3, []arabicLig{
		{[]rune{0xfef2}, 0xfc32},
	}},
	{0xfedf, []arabicLig{
		{[]rune{0xfe82}, 0xfef5},
		{[]rune{0xfe84}, 0xfef7},
		{[]rune{0xfe88}, 0xfef9},
		{[]rune{0xfe8e}, 0xfefb},
		{[]rune{0xfe9e}, 0xfc3f},
		{[]rune{0xfea0}, 0xfcc9},
		{[]rune{0xfea2}, 0xfc40},
		{[]rune{0xfea4}, 0xfcca},
		{[]rune{0xfea6}, 0xfc41},
		{[]rune{0xfea8}, 0xfccb},
		{[]rune{0xfee2}, 0xfc42},
		{[]rune{0xfee4}, 0xfccc},
		{[]rune{0xfeec}, 0xfccd},
		{[]rune{0xfef2}, 0xfc44},
	}},
	{0xfee0, []arabicLig{
		{[]rune{0xfe82}, 0xfef6},
		{[]rune{0xfe84}, 0xfef8},
		{[]rune{0xfe88}, 0xfefa},
		{[]rune{0xfe8e}, 0xfefc},
		{[]rune{0xfef0}, 0xfc86},
	}},
	{0xfee3, []arabicLig{
		{[]rune{0xfea0}, 0xfcce},
		{[]rune{0xfea4}, 0xfccf},
		{[]rune{0xfea8}, 0xfcd0},
		{[]rune{0xfee4}, 0xfcd1},
	}},
	{0xfee7, []arabicLig{
		{[]rune{0xfea0}, 0xfcd2},
		{[]rune{0xfea4}, 0xfcd3},
		{[]rune{0xfee2}, 0xfc4e},
		{[]rune{0xfee4}, 0xfcd5},
	}},
	{0xfee8, []arabicLig{
		{[]rune{0xfef2}, 0xfc8f},
	}},
	{0xfef3, []arabicLig{
		{[]rune{0xfea0}, 0xfcda},
		{[]rune{0xfea4}, 0xfcdb},
		{[]rune{0xfea8}, 0xfcdc},
		{[]rune{0xfee4}, 0xfcdd},
	}},
	{0xfef4, []arabicLig{
		{[]rune{0xfeae}, 0xfc91},
		{[]rune{0xfee6}, 0xfc94},
	}},
}

var arabicLigatureMarkTable = [...]arabicTableEntry{
	{0x0651, []arabicLig{
		{[]rune{0x064b}, 0xf2ee},
		{[]rune{0x064c}, 0xfc5e},
		{[]rune{0x064e}, 0xfc60},
		{[]rune{0x064f}, 0xfc61},
		{[]rune{0x0650}, 0xfc62},
	}},
}

var arabicLigature3Table = [...]arabicTableEntry{
	{0xfedf, []arabicLig{
		{[]rune{0xfee0, 0xfeea}, 0xf201},
		{[]rune{0xfee4, 0xfea0}, 0xf211},
		{[]rune{0xfee4, 0xfea4}, 0xfd88},
	}},
}
